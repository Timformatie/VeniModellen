# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
v$dt_input
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
v$dt_input[["primPSN_satisf"]]
input$primPSN_satisf
input$diagnose_in
v$dt_input[["primPSN_satisf"]] <- input$primPSN_satisf_in
v$dt_input[["primPSN_satisf"]]
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
PMG <- abs(primPSN_satisf - primPSN_int)
primPSN_satisf
primPSN_int
abs(primPSN_satisf - primPSN_int)
PMG <- abs(2 - primPSN_int)
PMG <- abs(as.numeric(primPSN_satisf) - as.numeric(primPSN_int))
dt_continue_surgery
X_continue_surgery <- dt_continue_surgery[variable == PMG, X]
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
X_no_surgery
(1 - as.numeric(X_continue_surgery))
X_no_surgery <- (1 - as.numeric(X_continue_surgery))
X_continue_surgery <- dt_continue_surgery[variable == PMG, X] * 100
X_no_surgery <- (1 - as.numeric(X_continue_surgery))
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
View(dt_results)
primPSN_satisf
primPSN_int
X_no_surgery
X_continue_surgery
dt_continue_surgery[variable == PMG, X]
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
force(data)
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
dt_continue_surgery <- data.table::data.table(readxl::read_excel("inst/extdata/continue_surgery.xlsx", range = "A2:L4"))
dt_continue_surgery = dcast(melt(dt_continue_surgery, id.vars = "PMG waarde"), variable ~ `PMG waarde`)
setnames(dt_continue_surgery, old = "NA", new = "X")
library(data.table)
dt_continue_surgery <- data.table::data.table(readxl::read_excel("inst/extdata/continue_surgery.xlsx", range = "A2:L4"))
dt_continue_surgery = dcast(melt(dt_continue_surgery, id.vars = "PMG waarde"), variable ~ `PMG waarde`)
setnames(dt_continue_surgery, old = "NA", new = "X")
dt_continue_surgery
dt_continue_surgery <- data.table::data.table(readxl::read_excel("inst/extdata/continue_surgery.xlsx", range = "A2:L4"))
dt_continue_surgery = dcast(melt(dt_continue_surgery, id.vars = "PMG waarde"), variable ~ `PMG waarde`)
dt_continue_surgery
dt_continue_surgery <- data.table::data.table(readxl::read_excel("inst/extdata/continue_surgery.xlsx", range = "A2:L5"))
dt_continue_surgery = dcast(melt(dt_continue_surgery, id.vars = "PMG waarde"), variable ~ `PMG waarde`)
dt_continue_surgery
usethis::use_data(
color_list,
model,
reverse_domains,
dt_continue_surgery,
internal = TRUE,
overwrite = TRUE
)
usethis::use_data(
color_list,
model,
reverse_domains,
dt_continue_surgery,
internal = TRUE,
overwrite = TRUE
)
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
View(data)
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
View(data)
data = data[, sentence := case_when(
from == "doel niet <br> behaald" & to == "operatie" ~ paste0(label, "% van de mensen die hun doel niet behaald hebben, kiest daarna voor een operatie."),
from == "doel niet <br> behaald" & to == "geen <br> operatie" ~ paste0(label, "% van de mensen die hun doel niet behaald hebben, kiest daarna niet voor een operatie."),
sentence
)]
ifelse(small_sample == 0,
" Percentage gebaseerd op ", n_patients, " die ook een PMG van ", PMG, " hadden.",
" Percentage gebaseerd op het totale gemiddelde van alle patienten, omdat er te weinig waarneming waren voor de groep patienten met dezelde PMG."
)
small_sample == 0
ifelse(small_sample == 0,
" Percentage gebaseerd op ", n_patients, " die ook een PMG van ", PMG, " hadden.",
" Percentage gebaseerd op het totale gemiddelde van alle patienten, omdat er te weinig waarneming waren voor de groep patienten met dezelde PMG."
)
ifelse(small_sample == 0,
(" Percentage gebaseerd op ", n_patients, " die ook een PMG van ", PMG, " hadden."),
# Add text that is shown when hovered over link
data = data[, sentence := case_when(
from == "therapie" & to == "doel <br> behaald" ~ paste0(weight, "% van de mensen die therapie hebben gekregen, heeft daarna hun doel behaald."),
from == "therapie" & to == "doel niet <br> behaald" ~ paste0(weight, "% van de mensen die therapie hebben gekregen, heeft daarna hun doel niet behaald."),
from == "doel niet <br> behaald" & to == "operatie" ~ paste0(label, "% van de mensen die hun doel niet behaald hebben, kiest daarna voor een operatie."),
from == "doel niet <br> behaald" & to == "geen <br> operatie" ~ paste0(label, "% van de mensen die hun doel niet behaald hebben, kiest daarna niet voor een operatie."),
from == "operatie" & to == "doel <br> behaald " ~ paste0(weight, "% van de mensen die na therapie een operatie hebben gekregen, heeft daarna hun doel behaald."),
from == "operatie" & to == "doel niet <br> behaald " ~ paste0(weight, "% van de mensen die na therapie een operatie hebben gekregen, heeft daarna hun doel niet behaald."),
from == "operatie" & to == "doel <br> behaald" ~ paste0(weight, "% van de mensen die een operatie hebben gekregen, heeft daarna hun doel behaald."),
from == "operatie" & to == "doel niet <br> behaald" ~ paste0(weight, "% van de mensen die een operatie hebben gekregen, heeft daarna hun doel niet behaald."),
from == "nonsurgical <br> treatment" & to == "goal <br> obtained" ~ paste0(weight, "% of people who have received nonsurgical treatment, has obtained their goal."),
from == "nonsurgical <br> treatment" & to == "goal not <br> obtained" ~ paste0(weight, "% of people who have received nonsurgical treatment, did not obtain their goal."),
from == "goal not <br> obtained" & to == "surgical <br> treatment" ~ paste0(weight, "% of people who did not obtain their goal, subsequently choose surgery."),
from == "goal not <br> obtained" & to == "no surgical <br> treatment" ~ paste0(weight, "% of people who did not obtain their goal, subsequently choose surgery."),
from == "surgical <br> treatment" & to == "goal <br> obtained " ~ paste0(weight, "% of people who received surgery after nonsurgical treatment, has obtained their goal."),
from == "surgical <br> treatment" & to == "goal not <br> obtained " ~ paste0(weight, "% people who received surgery after nonsurgical treatment, did not obtain their goal."),
from == "surgical <br> treatment" & to == "goal <br> obtained" ~ paste0(weight, "% of people who have received surgical treatment, has obtained their goal."),
from == "surgical <br> treatment" & to == "goal not <br> obtained" ~ paste0(weight, "% of people who have received surgical treatment, did not obtain their goal.")
)]
View(data)
# PMG <- abs(as.numeric(primPSN_satisf) - as.numeric(primPSN_int))
PMG <- 0
n_patients <- round(dt_continue_surgery[variable == PMG, n] * 100)
small_sample <- dt_continue_surgery[variable == PMG, small_sample]
if (small_sample == 0) {
data = data[from == "doel niet <br> behaald" & to == "operatie" | from == "doel niet <br> behaald" & to == "geen <br> operatie",
sentence := paste0(sentence, " Percentage gebaseerd op ", n_patients, " die ook een PMG van ", PMG, " hadden.")]
} else if (small_sample == 1) {
data = data[from == "doel niet <br> behaald" & to == "operatie" | from == "doel niet <br> behaald" & to == "geen <br> operatie",
sentence := paste0(sentence, " Percentage gebaseerd op het totale gemiddelde van alle patienten, omdat er te weinig waarneming waren voor de groep patienten met dezelde PMG.")]
}
View(data)
View(data)
if (small_sample == 0) {
data = data[(from == "doel niet <br> behaald" & to == "operatie") | (from == "doel niet <br> behaald" & to == "geen <br> operatie"),
sentence := paste0(sentence, " Percentage gebaseerd op ", n_patients, " die ook een PMG van ", PMG, " hadden.")]
} else if (small_sample == 1) {
data = data[(from == "doel niet <br> behaald" & to == "operatie") | (from == "doel niet <br> behaald" & to == "geen <br> operatie"),
sentence := paste0(sentence, " Percentage gebaseerd op het totale gemiddelde van alle patienten, omdat er te weinig waarneming waren voor de groep patienten met dezelde PMG.")]
}
View(data)
data[(from == "doel niet <br> behaald" & to == "operatie") | (from == "doel niet <br> behaald" & to == "geen <br> operatie")]
data[(from == "doel niet <br> behaald" & to == "operatie") | (from == "doel niet <br> behaald" & to == "geen <br> operatie"),
sentence := paste0(sentence, " Percentage gebaseerd op ", n_patients, " die ook een PMG van ", PMG, " hadden.")]
data = data[(from == "doel niet <br> behaald" & to == "operatie") | (from == "doel niet <br> behaald" & to == "geen <br> operatie"),
sentence := paste0(sentence, " Percentage gebaseerd op het totale gemiddelde van alle patienten, omdat er te weinig waarneming waren voor de groep patienten met dezelde PMG.")]
data
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
PMG
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Add context to text for patients (not) continuing with surgery after therapy
n_patients <- round(dt_continue_surgery[variable == PMG, n] * 100)
small_sample <- dt_continue_surgery[variable == PMG, small_sample]
if (small_sample == 0) {
data = data[(from == "doel niet <br> behaald" & to == "operatie") | (from == "doel niet <br> behaald" & to == "geen <br> operatie"),
sentence := paste0(sentence, " Percentage gebaseerd op ", n_patients, " patienten die ook een PMG van ", PMG, " hadden.")]
} else if (small_sample == 1) {
data = data[(from == "doel niet <br> behaald" & to == "operatie") | (from == "doel niet <br> behaald" & to == "geen <br> operatie"),
sentence := paste0(sentence, " Percentage gebaseerd op het totale gemiddelde van alle patienten, omdat er te weinig waarneming waren voor de groep patienten met dezelfde PMG.")]
}
sankey_plot <- hchart(data,
type = "sankey",
hcaes(from = from, to = to, weight = weight),
name = "Basic Sankey Diagram",
nodes = list(list(id = from_values[1], color = color_list$grey),
list(id = to_values[1], color = color_list$green),
list(id = to_values[2], color = color_list$red),
list(id = to_values[3], color = color_list$grey),
list(id = to_values[4], color = color_list$grey),
list(id = to_values[5], color = color_list$green),
list(id = to_values[6], color = color_list$red)
),
colorByPoint = FALSE,
color = c("#cbd4e4"),
nodeWidth = 120,
nodePadding = 25,
linkColorMode = "gradient",
dataLabels = list(nodeFormat = "{point.name}",
format = paste0('<span style = "letter-spacing: 0.15rem">', "{point.label}%", '</span>'),
style = list(fontSize = "18px",
color = "black"),
#adding = 25,
allowOverlap = TRUE)
) %>%
hc_tooltip(headerFormat = "",
pointFormat = paste0('<span style = "color: white; font-size: 16px">', "{point.sentence}", '</span>'),
backgroundColor = "#4876b3",
borderColor = "black")
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
sankey_plot <- hchart(data,
type = "sankey",
hcaes(from = from, to = to, weight = weight),
name = "Basic Sankey Diagram",
nodes = list(list(id = from_values[1], color = color_list$grey),
list(id = to_values[1], color = color_list$green),
list(id = to_values[2], color = color_list$red),
list(id = to_values[3], color = color_list$grey),
list(id = to_values[4], color = color_list$grey),
list(id = to_values[5], color = color_list$green),
list(id = to_values[6], color = color_list$red)
),
colorByPoint = FALSE,
color = c("#cbd4e4"),
nodeWidth = 120,
nodePadding = 25,
linkColorMode = "gradient",
dataLabels = list(nodeFormat = "{point.name}",
format = paste0('<span style = "letter-spacing: 0.15rem">', "{point.label}%", '</span>'),
style = list(fontSize = "18px",
color = "black"),
#adding = 25,
allowOverlap = TRUE)
) %>%
hc_tooltip(headerFormat = "",
pointFormat = paste0('<span style = "color: white; font-size: 16px">', "{point.sentence}", '</span>'),
backgroundColor = "#4876b3",
borderColor = "black")
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
unique(dt_train$Behandeling_clustered)
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
# Set options here
options(golem.app.prod = FALSE) # TRUE = production mode, FALSE = development mode
# Comment this if you don't want the app to be served on a random port
options(shiny.port = httpuv::randomPort())
# Detach all loaded packages and clean your environment
golem::detach_all_attached()
# rm(list=ls(all.names = TRUE))
# Document and reload your package
golem::document_and_reload()
# Run the application
run_app()
